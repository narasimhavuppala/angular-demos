<!DOCTYPE html>
<html lang="en">
  <head>
    <title>AngularJS controller demo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../bootstrap-3.1.1/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="../angular-1.3.0/angular.js"></script>
  </head>
  <body ng-app="demoApp">

    <div class="container" ng-controller="CounterCtrl">

      <div class="jumbotron" ng-style="jumbotronStyle">
        <p>
          <span class="number ng-cloak">{{counter}}</span>
          days since a bug was found
        </p>
      </div>

      <div class="buttons">   
        <button class="btn btn-default btn-success" ng-click="incrementCounter()">
          No bugs found today! :)
        </button>
        <button class="btn btn-default btn-danger" ng-click="resetCounter()">
          A bug was found :(
        </button>
      </div>

    </div>

    <footer>
      <a href="3-more-logic-added.html">&laquo; Previous step</a>
      <a href="4-controller-added-alternative.html">Alternative syntax</a>
      <a href="5-controller-externalized.html">Next step: Externalize controller &raquo;</a>
    </footer>

    <script>

      angular.module('demoApp', [])
        .controller('CounterCtrl', ['$scope', CounterCtrl]);

      function CounterCtrl($scope) {

        // replace all the ng-init and declare here instead
        // also updated color value
        $scope.counter = 0;
        $scope.happyColor = '92,184,92'; // a bright green
        $scope.jumbotronStyle = {'background-color': 'rgba('+$scope.happyColor+',0)'};

        // replace all the ng-click's with method calls
        $scope.incrementCounter = function() {
          $scope.counter++; 
          $scope.jumbotronStyle = {'background-color': 'rgba('+$scope.happyColor+','+$scope.counter/20+')'}
        };
        $scope.resetCounter = function(){
          $scope.counter = 0;
          $scope.jumbotronStyle = {'background-color': 'rgba('+$scope.happyColor+',0)'};
        };

      }
      
    </script>
  </body>
</html>
