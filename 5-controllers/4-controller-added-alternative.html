<!DOCTYPE html>
<html lang="en">
  <head>
    <title>AngularJS controller demo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../bootstrap-3.1.1/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body ng-app>

    <div class="container" ng-controller="CounterCtrl as ctrl">

      <div class="jumbotron" ng-style="ctrl.jumbotronStyle">
        <p>
          <span class="number">{{ctrl.counter}}</span>
          days since a bug was found
        </p>
      </div>

      <div class="buttons">   
        <button class="btn btn-default btn-success" ng-click="ctrl.incrementCounter()">
          No bugs found today! :)
        </button>
        <button class="btn btn-default btn-danger" ng-click="ctrl.resetCounter()">
          A bug was found :(
        </button>
      </div>

    </div>

    <footer>
      <a href="3-more-logic-added.html">&laquo; Previous step</a>
      <a href="4-controller-added.html">Original syntax</a>
      <a href="5-controller-externalized.html">Next step: Externalize controller &raquo;</a>
    </footer>

    <script src="../angular-1.3.0/angular.js"></script>
    <script>
      function CounterCtrl() {

        // replace all the ng-init and declare here instead
        // also updated color value
        this.counter = 0;
        this.happyColor = '92,184,92'; // a bright green
        this.jumbotronStyle = {'background-color': 'rgba('+this.happyColor+',0)'};

        // replace all the ng-click's with method calls
        this.incrementCounter = function() {
          this.counter++; 
          this.jumbotronStyle = {'background-color': 'rgba('+this.happyColor+','+this.counter/20+')'}
        };
        this.resetCounter = function(){
          this.counter = 0;
          this.jumbotronStyle = {'background-color': 'rgba('+this.happyColor+',0)'};
        };

      }
    </script>
  </body>
</html>